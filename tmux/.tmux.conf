# Tmux Configuration

# Set prefix to Ctrl-a (common alternative to Ctrl-b)
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# Enable mouse support
set -g mouse on

# Increase scrollback buffer
set-option -g history-limit 10000

# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Enable 256 colors
set -g default-terminal "screen-256color"

# Reduce escape time for better vim experience
set -sg escape-time 10

# ============================================================================
# FAM Dashboard Session - Ctrl Key Passthrough
# ============================================================================
# When in the fam-dashboard session, pass through Ctrl keys to the application
# This allows fam to handle its own keybindings like Ctrl-a, Ctrl-l, Ctrl-k

# Hook that runs when switching to fam-dashboard session
# Temporarily unbind common Ctrl keys to let fam handle them
bind-key -T root -n C-a if-shell -F '#{==:#{session_name},fam-dashboard}' 'send-keys C-a' 'send-prefix'
bind-key -T root -n C-k if-shell -F '#{==:#{session_name},fam-dashboard}' 'send-keys C-k' ''
bind-key -T root -n C-l if-shell -F '#{==:#{session_name},fam-dashboard}' 'send-keys C-l' ''

# Alternative approach: Disable all tmux key bindings in fam-dashboard windows
# This passes ALL keys through to the application
set-hook -g client-session-changed 'if-shell -F "#{==:#{session_name},fam-dashboard}" "set-option -g prefix None" "set-option -g prefix C-a"'
